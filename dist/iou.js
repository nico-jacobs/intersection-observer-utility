!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Iou=e():t.Iou=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=2)}([function(t,e){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=window.document,e=[];i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},i.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},i.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},i.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},i.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(o(window,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},i.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(window,"resize",this._checkForIntersections,!0),r(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},i.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var o=i.element,r=s(o),c=this._rootContainsTarget(o),u=i.entry,l=t&&c&&this._computeTargetAndRootIntersection(o,e),a=i.entry=new n({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:r,rootBounds:e,intersectionRect:l});u?t&&c?this._hasCrossedThreshold(u,a)&&this._queuedEntries.push(a):u&&u.isIntersecting&&this._queuedEntries.push(a):this._queuedEntries.push(a)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},i.prototype._computeTargetAndRootIntersection=function(e,n){if("none"!=window.getComputedStyle(e).display){for(var i,o,r,c,l,a,p,d,v=s(e),h=u(e),f=!1;!f;){var b=null,g=1==h.nodeType?window.getComputedStyle(h):{};if("none"==g.display)return;if(h==this.root||h==t?(f=!0,b=n):h!=t.body&&h!=t.documentElement&&"visible"!=g.overflow&&(b=s(h)),b&&(i=b,o=v,r=void 0,c=void 0,l=void 0,a=void 0,p=void 0,d=void 0,r=Math.max(i.top,o.top),c=Math.min(i.bottom,o.bottom),l=Math.max(i.left,o.left),a=Math.min(i.right,o.right),d=c-r,!(v=(p=a-l)>=0&&d>=0&&{top:r,bottom:c,left:l,right:a,width:p,height:d})))break;h=u(h)}return v}},i.prototype._getRootRect=function(){var e;if(this.root)e=s(this.root);else{var n=t.documentElement,i=t.body;e={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(e)},i.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,i=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==i)for(var o=0;o<this.thresholds.length;o++){var r=this.thresholds[o];if(r==n||r==i||r<n!=r<i)return!0}},i.prototype._rootIsInDom=function(){return!this.root||c(t,this.root)},i.prototype._rootContainsTarget=function(e){return c(this.root||t,e)},i.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},i.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=n}function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,i=this.intersectionRect,o=i.width*i.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function i(t,e){var n,i,o,r=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),i))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" ")}function o(t,e,n,i){"function"==typeof t.addEventListener?t.addEventListener(e,n,i||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,i){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,i||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function s(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(t,e){for(var n=e;n;){if(n==t)return!0;n=u(n)}return!1}function u(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}}()},function(t,e,n){var i;!function t(e,n,o){function r(c,u){if(!n[c]){if(!e[c]){if(!u&&"function"==typeof i&&i)return i(c,!0);if(s)return s(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var a=n[c]={exports:{}};e[c][0].call(a.exports,(function(t){return r(e[c][1][t]||t)}),a,a.exports,t,e,n,o)}return n[c].exports}for(var s="function"==typeof i&&i,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(t,e,n){e.exports=function(){"undefined"==typeof EventTarget&&(window.EventTarget=Node);var t={interceptors:[],getRegisteredEventListener:function(t,e){var n=e.type+"-"+(e.options.capture?"1":"0");if(void 0!==t.__eventListeners&&void 0!==t.__eventListeners[n])for(var i=t.__eventListeners[n],o=0;o<i.length;o++)if(i[o].listener===e.listener)return i[o];return null},registerEventListener:function(t,e){var n=e.type+"-"+(e.options.capture?"1":"0");void 0===t.__eventListeners&&(t.__eventListeners={}),void 0===t.__eventListeners[n]&&(t.__eventListeners[n]=[]),t.__eventListeners[n].push(e)},unregisterEventListener:function(t,e){var n=e.type+"-"+(e.options.capture?"1":"0");if(void 0!==t.__eventListeners&&void 0!==t.__eventListeners[n]){for(var i=t.__eventListeners[n],o=0;o<i.length;o++)i[o].listener===e.listener&&i.splice(o,1);0===i.length&&delete t.__eventListeners[n]}},normalizeListenerCallback:function(t){return"function"==typeof t||null==t?t:"object"==typeof t&&"function"==typeof t.handleEvent?t.handleEvent:function(e){t(e)}},normalizeListenerOptions:function(t){switch(typeof t){case"boolean":t={capture:t};break;case"undefined":t={capture:!1};break;case"object":null===t&&(t={capture:!1});break;default:throw new Error("Unsupported options type for addEventListener")}return t.once=Boolean(t.once),t.passive=Boolean(t.passive),t.capture=Boolean(t.capture),t},normalizeListenerArguments:function(t,e,n){return{type:t,listener:this.normalizeListenerCallback(e),options:this.normalizeListenerOptions(n)}},intercept:function(t,e){for(var n=null,i=0;i<this.interceptors.length;i++)this.interceptors[i].target===t&&(n=this.interceptors[i]);null===n?(n={target:t,interceptors:[e]},this.interceptors.push(n),this.interceptAddEventListener(t,n),this.interceptRemoveEventListener(t,n)):n.interceptors.push(e)},interceptAddEventListener:function(t,e){var n=this,i=t.prototype.addEventListener;return t.prototype.addEventListener=function(t,o,r){var s=n.normalizeListenerArguments(t,o,r);if(!n.getRegisteredEventListener(this,s)){s.polyfilled={type:s.type,listener:s.listener,options:{capture:s.options.capture,once:s.options.once,passive:s.options.passive}};for(var c=0;c<e.interceptors.length;c++){var u=e.interceptors[c];"function"==typeof u.add&&u.add(s)}n.registerEventListener(this,s),i.call(this,s.polyfilled.type,s.polyfilled.listener,s.polyfilled.options)}},function(){t.prototype.addEventListener=i}},interceptRemoveEventListener:function(t,e){var n=this,i=t.prototype.removeEventListener;return t.prototype.removeEventListener=function(t,e,o){var r=n.normalizeListenerArguments(t,e,o),s=n.getRegisteredEventListener(this,r);s?(n.unregisterEventListener(this,r),i.call(this,s.polyfilled.type,s.polyfilled.listener,s.polyfilled.options)):i.call(this,t,e,o)},function(){t.prototype.removeEventListener=i}},interceptAll:function(t){this.intercept(EventTarget,t),window instanceof EventTarget||this.intercept(Window,t)},releaseAll:function(){for(var t=0,e=this.interceptors.length;t<e;t++)this.interceptors()},error:function(t){console.error(t)}};return t}()},{}],2:[function(t,e,n){var i;(i=t("./EventListenerInterceptor.js")).isSupportedOnEvent=function(t,e){return"on"+e in t},i.isSupportedTransitionEvent=function(t,e){return i.isSupportedOnEvent(t,e)||"style"in t&&void 0!==t.style.transition},i.isSupportedFullScreenEvent=function(t,e){return!!i.isSupportedOnEvent(t,e)||(/^ms/.test(e.toLowerCase())?"msRequestFullscreen"in document.body:/^moz/.test(e)?"mozRequestFullscreen"in document.body:!!/^webkit/.test(e)&&"webkitRequestFullscreen"in document.body)},i.generateEventTypes=function(){var t=this;this.eventTypes={},this.vendorPrefixes=["","webkit","moz","ms","o"],this.eventTypes.wheel=["wheel","mousewheel","DOMMouseScroll"].map((function(e){return{type:e,isSupported:t.isSupportedOnEvent}})),this.eventTypes.fullscreenchange=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange","msfullscreenchange"].map((function(e){return{type:e,isSupported:t.isSupportedFullScreenEvent}})),this.eventTypes.fullscreenerror=["fullscreenerror","mozfullscreenerror","webkitfullscreenerror","MSFullscreenError","msfullscreenerror"].map((function(e){return{type:e,isSupported:t.isSupportedFullScreenEvent}})),["pointerlockchange","pointerlockerror","animationstart","animationiteration","animationend","pointercancel","pointerdown","pointerhover","pointermove","pointerout","pointerover","pointerup"].forEach((function(e){t.eventTypes[e]=t.vendorPrefixes.map((function(n){return{type:n+e,isSupported:t.isSupportedOnEvent}}))})),["transitionstart","transitionrun","transitionend"].forEach((function(e){t.eventTypes[e]=t.vendorPrefixes.map((function(n){return{type:n+e,isSupported:t.isSupportedTransitionEvent}}))}))},i.getSupportedEventType=function(t,e){var n=this.eventTypes[e];if(void 0===n)return e;for(var i,o=0;o<n.length;o++)if((i=n[o]).isSupported(t,i.type))return i.type;return e},i.polyfillListenerEventTypes=function(){this.generateEventTypes();var t=this;this.interceptAll({add:function(e){e.polyfilled.type=t.getSupportedEventType(this,e.polyfilled.type)}})},i.polyfillListenerEventTypes()},{"./EventListenerInterceptor.js":1}],3:[function(t,e,n){var i;(i=t("./EventListenerInterceptor.js")).detectSupportedOptions=function(){var t=this;this.supportedOptions={once:!1,passive:!1,capture:!1,all:!1,some:!1},document.createDocumentFragment().addEventListener("test",(function(){}),{get once(){return t.supportedOptions.once=!0,!1},get passive(){return t.supportedOptions.passive=!0,!1},get capture(){return t.supportedOptions.capture=!0,!1}}),this.supportedOptions.all=this.supportedOptions.once&&this.supportedOptions.passive&&this.supportedOptions.capture,this.supportedOptions.some=this.supportedOptions.once||this.supportedOptions.passive||this.supportedOptions.capture},i.polyfillListenerOptions=function(){if(this.detectSupportedOptions(),!this.supportedOptions.all){var t=this;this.interceptAll({add:function(e){var n=e.options.once&&!t.supportedOptions.once,i=e.options.passive&&!t.supportedOptions.passive;if(n||i){var o=e.polyfilled.listener;e.polyfilled.listener=function(t){return n&&this.removeEventListener(e.type,e.listener,e.options),i&&(t.preventDefault=function(){throw new Error("Unable to preventDefault inside passive event listener invocation.")}),o.call(this,t)}}t.supportedOptions.some||(e.polyfilled.options=e.options.capture)}})}},i.polyfillListenerOptions()},{"./EventListenerInterceptor.js":1}],4:[function(t,e,n){e.exports=function(t,e){if("object"==typeof e&&null!==e){var n,i=Object.getPrototypeOf(e);for(n in i)if(!(n in t)){var o=Object.getOwnPropertyDescriptor(i,n);o&&Object.defineProperty(t,n,o)}for(n in e)n in t||(t[n]=e[n])}}},{}],5:[function(t,e,n){!function(t){try{new window.CustomEvent("event",{bubbles:!0,cancelable:!0})}catch(i){var e=window.CustomEvent||window.Event,n=function(e,n){n=n||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,void 0!==n.bubbles&&n.bubbles,void 0!==n.cancelable&&n.cancelable,void 0===n.detail?{}:n.detail),t(i,this),i};n.prototype=e.prototype,window.CustomEvent=n}}(t("./ApplyThisPrototype.js"))},{"./ApplyThisPrototype.js":4}],6:[function(t,e,n){!function(t){try{new window.Event("event",{bubbles:!0,cancelable:!0})}catch(i){var e=window.Event,n=function(e,n){n=n||{};var i=document.createEvent("Event");return i.initEvent(e,void 0!==n.bubbles&&n.bubbles,void 0!==n.cancelable&&n.cancelable,void 0===n.detail?{}:n.detail),t(i,this),i};n.prototype=e.prototype,window.Event=n}}(t("./ApplyThisPrototype.js"))},{"./ApplyThisPrototype.js":4}],7:[function(t,e,n){!function(t){try{new window.FocusEvent("event",{bubbles:!0,cancelable:!0})}catch(i){var e=window.FocusEvent||window.Event,n=function(e,n){n=n||{};var i=document.createEvent("FocusEvent");return i.initFocusEvent(e,void 0!==n.bubbles&&n.bubbles,void 0!==n.cancelable&&n.cancelable,void 0===n.view?window:n.view,void 0===n.detail?{}:n.detail,void 0===n.relatedTarget?null:n.relatedTarget),t(i,this),i};n.prototype=e.prototype,window.FocusEvent=n}}(t("./ApplyThisPrototype.js"))},{"./ApplyThisPrototype.js":4}],8:[function(t,e,n){!function(t){try{new window.KeyboardEvent("event",{bubbles:!0,cancelable:!0})}catch(i){var e=window.KeyboardEvent||window.Event,n=function(e,n){n=n||{};var i=document.createEvent("KeyboardEvent");return i.initKeyboardEvent(e,void 0!==n.bubbles&&n.bubbles,void 0!==n.cancelable&&n.cancelable,void 0===n.view?window:n.view,void 0===n.key?"":n.key,void 0===n.location?0:n.location,(!0===n.ctrlKey?"Control ":"")+(!0===n.altKey?"Alt ":"")+(!0===n.shiftKey?"Shift ":"")+(!0===n.metaKey?"Meta ":""),void 0!==n.repeat&&n.repeat,void 0===n.locale?navigator.language:n.locale),i.keyCode=void 0===n.keyCode?0:n.keyCode,i.code=void 0===n.code?"":n.code,i.charCode=void 0===n.charCode?0:n.charCode,i.char=void 0===n.charCode?"":n.charCode,i.which=void 0===n.which?0:n.which,t(i,this),i};n.prototype=e.prototype,window.KeyboardEvent=n}}(t("./ApplyThisPrototype.js"))},{"./ApplyThisPrototype.js":4}],9:[function(t,e,n){!function(t){try{new window.MouseEvent("event",{bubbles:!0,cancelable:!0})}catch(i){var e=window.MouseEvent||window.Event,n=function(e,n){n=n||{};var i=document.createEvent("MouseEvent");return i.initMouseEvent(e,void 0!==n.bubbles&&n.bubbles,void 0!==n.cancelable&&n.cancelable,void 0===n.view?window:n.view,void 0===n.detail?0:n.detail,void 0===n.screenX?0:n.screenX,void 0===n.screenY?0:n.screenY,void 0===n.clientX?0:n.clientX,void 0===n.clientY?0:n.clientY,void 0!==n.ctrlKey&&n.ctrlKey,void 0!==n.altKey&&n.altKey,void 0!==n.shiftKey&&n.shiftKey,void 0!==n.metaKey&&n.metaKey,void 0===n.button?0:n.button,void 0===n.relatedTarget?null:n.relatedTarget),i.buttons=void 0===n.buttons?0:n.buttons,i.region=void 0===n.region?null:n.region,t(i,this),i};n.prototype=e.prototype,window.MouseEvent=n}}(t("./ApplyThisPrototype.js"))},{"./ApplyThisPrototype.js":4}],10:[function(t,e,n){!function(t){try{new window.PointerEvent("event",{bubbles:!0,cancelable:!0})}catch(o){var e=window.PointerEvent||window.Event,n=function(e,n){n=n||{};var i=document.createEvent("PointerEvent");return i.initPointerEvent(e,void 0!==n.bubbles&&n.bubbles,void 0!==n.cancelable&&n.cancelable,void 0===n.view?window:n.view,void 0===n.detail?0:n.detail,void 0===n.screenX?0:n.screenX,void 0===n.screenY?0:n.screenY,void 0===n.clientX?0:n.clientX,void 0===n.clientY?0:n.clientY,void 0!==n.ctrlKey&&n.ctrlKey,void 0!==n.altKey&&n.altKey,void 0!==n.shiftKey&&n.shiftKey,void 0!==n.metaKey&&n.metaKey,void 0===n.button?0:n.button,void 0===n.relatedTarget?null:n.relatedTarget,void 0===n.offsetX?0:n.offsetX,void 0===n.offsetY?0:n.offsetY,void 0===n.width?1:n.width,void 0===n.height?1:n.height,void 0===n.pressure?0:n.pressure,void 0===n.twist?0:n.twist,void 0===n.tiltX?0:n.tiltX,void 0===n.tiltY?0:n.tiltY,void 0===n.pointerId?0:n.pointerId,void 0===n.pointerType?"":n.pointerType,void 0===n.hwTimestamp?0:n.hwTimestamp,void 0!==n.isPrimary&&n.isPrimary),i.tangentialPressure=void 0===n.tangentialPressure?0:n.tangentialPressure,t(i,this),i};n.prototype=e.prototype;var i=Object.getOwnPropertyDescriptor(n.prototype,"rotation");i&&Object.defineProperty(n.prototype,"twist",i),window.PointerEvent=n}}(t("./ApplyThisPrototype.js"))},{"./ApplyThisPrototype.js":4}],11:[function(t,e,n){t("./Event.js"),t("./CustomEvent.js"),t("./MouseEvent.js"),t("./KeyboardEvent.js"),t("./FocusEvent.js"),t("./PointerEvent.js")},{"./CustomEvent.js":5,"./Event.js":6,"./FocusEvent.js":7,"./KeyboardEvent.js":8,"./MouseEvent.js":9,"./PointerEvent.js":10}],12:[function(t,e,n){t("./constructors/index.js"),t("./ListenerOptions.js"),t("./ListenerEventTypes.js")},{"./ListenerEventTypes.js":2,"./ListenerOptions.js":3,"./constructors/index.js":11}]},{},[12])},function(t,e,n){"use strict";n.r(e);n(0),n(1);function i(t){return t&&"object"==typeof t&&!Array.isArray(t)}var o={setVisible:function(t,e,n,i){let o=i.strings.attributeVisible,r=i.strings.attributeVisibleTrue,s=i.strings.attributeRelation,c=i.strings.attributeRelationCurrent,u=i.strings.attributeRelationNext,l=i.strings.attributeRelationPrev;t.forEach((function(t){t.setAttribute(o,r),t.setAttribute(s,c)})),e.forEach((function(t){t.setAttribute(s,l)})),n.forEach((function(t){t.setAttribute(s,u)}))},setInVisible:function(t,e,n,i){let o=i.strings.attributeVisible,r=i.strings.attributeVisibleFalse,s=i.strings.attributeVisibleTrue,c=i.strings.attributeRelation,u=i.strings.attributeRelationCurrent;t.forEach((function(t){t.setAttribute(o,r)})),e.forEach((function(t){t.getAttribute(o)===s&&t.setAttribute(c,u)})),n.forEach((function(t){t.getAttribute(o)===s&&t.setAttribute(c,u)}))},setDirection:function(t,e,n){let i=n.strings.attributeDirection;t.forEach((function(t){t.setAttribute(i,e)}))},setRelation:function(t,e,n){let i=n.strings.attributeRelation,o=n.strings.attributeRelationNext,r=n.strings.attributeRelationPrev;e.forEach((function(t){t.setAttribute(i,o)})),t.forEach((function(t){t.setAttribute(i,r)}))},getNextSiblings:function(t){let e=t.tagName,n=[];for(;t=t.nextSibling;)t.tagName===e&&n.push(t);return n},getPreviousSiblings:function(t){let e=t.tagName,n=[];for(;t=t.previousSibling;)t.tagName===e&&n.push(t);return n}};e.default=class{constructor(t){let e=this.mergeCustomDefaultOptions(t,this);this.elementTrigger=e.elementTrigger,this.strings=e.strings,this.functions=e.functions,this.initialized=!1,this.pageHasScrolled=!1}mergeCustomDefaultOptions(t,e){return function t(e,...n){if(!n.length)return e;const o=n.shift();if(i(e)&&i(o))for(const n in o)i(o[n])?(e[n]||Object.assign(e,{[n]:{}}),t(e[n],o[n])):Object.assign(e,{[n]:o[n]});return t(e,...n)}({elementTrigger:"[data-iou-trigger]",strings:{attributeTarget:"data-iou-target",attributeVisible:"data-iou-visible",attributeVisibleTrue:"true",attributeVisibleTop:"visible-top",attributeVisibleBottom:"visible-bottom",attributeInVisibleTop:"invisible-top",attributeInVisibleBottom:"invisible-bottom",attributeVisibleFalse:"false",attributeDirection:"data-iou-direction",attributeRelation:"data-iou-relation",attributeRelationCurrent:"current",attributeRelationPrev:"prev",attributeRelationNext:"next",siblingsFilter:"iou-section"},functions:{setVisible(t,n,i){o.setVisible(t,n,i,e)},setInVisible(t,n,i){o.setInVisible(t,n,i,e)},setDirection(t,n){o.setDirection(t,n,e)},setRelation(t,n){o.setRelation(t,n,e)},dispatchIouOut(t){let e=new CustomEvent("iouOut",{bubbles:!0,cancelable:!0,detail:{entryObj:t}});document.dispatchEvent(e)},dispatchIouIn(t){let e=new CustomEvent("iouIn",{bubbles:!0,cancelable:!0,detail:{entryObj:t}});document.dispatchEvent(e)}},siblingsNext:"",siblingsPrev:""},t)}init(){this.IntersectionWatcher(),this.initialized=!0}setEntryRelation(t){let e=t.getAttribute(this.strings.attributeTarget);if(-1!==e.indexOf(",")){let n=/,\s/;e.split(n).forEach((function(e){let n=document.querySelectorAll(e);n.forEach((function(e){t.siblingsNext=o.getNextSiblings(e),t.siblingsPrev=o.getPreviousSiblings(e)})),t.targetEls=n}))}else{let n=document.querySelectorAll(e);n.forEach((function(e){t.siblingsNext=o.getNextSiblings(e),t.siblingsPrev=o.getPreviousSiblings(e)})),t.targetEls=n}}IntersectionWatcher(){let t=document.querySelectorAll(this.elementTrigger);let e;e=new IntersectionObserver(t=>{t.forEach(t=>{console.log(t.target.targetEls),this.entryLogicIn(t),this.entryLogicOut(t)})},{root:null,rootMargin:"0px",threshold:[0]}),t.forEach(t=>{this.setEntryRelation(t),e.observe(t)})}entryLogicIn(t){if(!0===t.isIntersecting){let e=this,n=t.target.targetEls,i=t.target.siblingsNext,o=t.target.siblingsPrev,r=t.boundingClientRect.top,s=new CustomEvent("iouIn",{bubbles:!0,cancelable:!0,detail:{entryObj:t}});document.dispatchEvent(s),this.functions.setVisible(n,o,i),r<0?this.functions.setDirection(n,e.strings.attributeVisibleTop):this.functions.setDirection(n,e.strings.attributeVisibleBottom)}}entryLogicOut(t){if(!1===t.isIntersecting){let e=this,n=t.target.targetEls,i=t.target.siblingsNext,o=t.target.siblingsPrev;this.functions.setInVisible(n,o,i);let r=t.boundingClientRect.top,s=new CustomEvent("iouOut",{bubbles:!0,cancelable:!0,detail:{entryObj:t}});document.dispatchEvent(s),r<0?this.functions.setDirection(n,e.strings.attributeInVisibleTop):this.functions.setDirection(n,e.strings.attributeInVisibleBottom)}}userHasScrolled(t){let e=this;return!1===e.pageHasScrolled&&setTimeout((function(){document.addEventListener("scroll",(function(){return e.pageHasScrolled=!0,!0}),{once:!0})}),2e3),!1}}}]).default}));
//# sourceMappingURL=iou.js.map